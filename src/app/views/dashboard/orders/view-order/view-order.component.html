<div class="main">
  <app-banner [subheading]="subheading" [heading]="heading" [actionButton]="actionButton"></app-banner>
  <div class="contianer" *ngIf="order$  | async as order" class="container-table">
    <!-- <pre>
      {{order | json}}
    </pre> -->
    <div class="main-content">
      <div class="left">
        <div class="matrix col-1-of-2">
          <span>
            <h1 class="separator">Order information</h1>
            <div class="basic-info table-1">
              <mat-card class="card">
                <span class="table-card col-1-of-1">
                  <div class="data">
                    <h1 class="text">
                      ORD-{{order.OrderNo}}
                      <span class="span">
                        order #
                      </span>
                    </h1>
                  </div>
                </span>
              </mat-card>
              <mat-card class="card">
                <span class="table-card col-1-of-1">
                  <div class="data">
                    <h1 class="text">
                      {{order.Customer?.FirstName}}
                      {{order.Customer?.LastName}}
                      <span class="span">
                        Customer
                      </span>
                    </h1>
                  </div>
                </span>
              </mat-card>
              <mat-card class="card">
                <span class="table-card col-1-of-1">
                  <div class="data">
                    <h1 class="text">
                      {{order.Address?.AddressLine1}} <br>
                      {{order.Address?.AddressLine2}}<br>
                      {{order.Address?.AddressLine3}}<br>
                      {{order.Address?.Province}}<br>
                      {{order.Address?.City}}<br>
                      {{order.Address?.PostalCode}}
                      <span class="span">
                        Delivery Address
                      </span>
                    </h1>
                  </div>
                </span>
              </mat-card>
            </div>
          </span>


          <div class="">
            <h1 class="separator">Special information</h1>
            <div class="basic-info table-1">
              <mat-card class="card">
                <span class="table-card col-1-of-1">
                  <div class="data">
                    <h1 class="text">
                      {{order.Supplier?.FirstName}}
                      {{order.Supplier?.LastName}}
                      <span class="span">
                        Supplier
                      </span>
                    </h1>
                  </div>
                </span>
              </mat-card>

              <mat-card class="card">
                <span class="table-card col-1-of-1">



                  <div class="data">
                    <h1 class="text">
                      {{order.SpecialInstructions}}
                      <span class="span">
                        special instructions
                      </span>
                    </h1>
                  </div>


                </span>
              </mat-card>
            </div>
          </div>
        </div>
      </div>
      <span>
        <h1 class="separator">Products</h1>
      </span>
      <div>
        <div class="products" *ngIf="order.Orderroducts">
          <div class="table">
            <div class="header">
              <div class="item">Product Name</div>
              <div class="item"> Price</div>
              <div class="item"> Qty</div>
              <div class="item"> Total</div>
            </div>
            <div class="table-content">
              <div class="row" *ngFor="let item of order.Orderroducts">
                <div class="item">
                  <div class="image">
                    <img [src]="item.Images[0].Url" alt="" *ngIf="item.Images" />
                    <img src="assets/images/product-placeholder.svg" *ngIf="!item.Images" alt="" />
                  </div>
                </div>
                <div class="item">
                  <p>
                    <b>
                      {{item.ProductName}}
                    </b>
                    <span class="number" *ngIf="item.ProductCode">
                      Code:<b> {{item.ProductCode}} </b>
                    </span>
                  </p>
                </div>

                <div class="item">
                  <b class="mt1">
                    {{item.Price | currency:'R'}}
                    <span *ngIf="item.Units">
                      / {{item.Units}}
                    </span>
                  </b>
                </div>
                <div class="item">
                  {{item.Quantity}}
                </div>
                <div class="item">
                  {{item.Price*item.Quantity | currency:'R'}}
                </div>
              </div>
            </div>

          </div>

          <div class="table-mobile">
            <div class="row" *ngFor="let item of products">
              <div class="item">
                <div class="image">
                  <img [src]="item.Images[0].Url" alt="" *ngIf="item.Images" />
                  <img src="assets/images/product-placeholder.svg" *ngIf="!item.Images" alt="" />
                </div>
              </div>
              <div class="item">
                <p>
                  <b>
                    {{item.ProductName}}
                  </b>

                  <span class="price" *ngIf="item.Units">
                    {{item.Price | currency:'R'}} / {{item.Units}}
                  </span>
                </p>
              </div>

              <div class="item">
                <button mat-icon-button class="btn" aria-label="Example icon button with a vertical three dot icon"
                  (click)="addToCart(item)">
                  <mat-icon>add</mat-icon>
                </button>
              </div>
            </div>
          </div>

          <ng-template #notFound>
            <app-placeholder [placeHolder]="placeHolder"></app-placeholder>
          </ng-template>
        </div>

      </div>
      <div class="actions" *ngIf="currentUser.RoleId !=='3'">
        <h1 class="separator"></h1>
        <button mat-button class="primary" (click)="action()">Looks good, save</button>
        <button mat-button (click)="edit()" class="simple">Edit</button>
      </div>
      <div class="actions" *ngIf="currentUser.RoleId ==='3'">
        <h1 class="separator"></h1>
        <mat-card-actions class="cta">
          <button mat-button class="info" *ngIf="order.StatusId === 1" (click)="updateOrderStatus(order,2)">Accept
            order.</button>
          <button mat-button class="info" *ngIf="order.StatusId === 2" (click)="updateOrderStatus(order,3)">On its
            way.</button>
          <button mat-button class="info" *ngIf="order.StatusId === 3" (click)="updateOrderStatus(order,4)">On
            Delivery.</button>
          <button mat-button class="success" *ngIf="order.StatusId === 4" (click)="updateOrderStatus(order,5)">Accepted
            by
            customer.</button>
          <button mat-button class="success" *ngIf="order.StatusId === 5">Order Complete.</button>
          <!-- <button mat-button class="info">Print Order</button> -->
        </mat-card-actions>
      </div>
    </div>

  </div>

</div>
